$(document).ready(function(){var r=$("#inv_track_item_item_id"),p=$("#inv_track_item_req_item_id__row");p.length&&p.hide();r.change(function(){var c=r.val(),g=$("#inv_track_item_item_pack_id"),h=$("#inv_track_item_quantity");g.html("");h.val("");if(""!==c){var a,k=!0;c=S3.supply.item_data[c];var l=c.packs,m=l.length,e=c.req_items,d=e[0];for(a=0;a<m;a++){var b=l[a];if(1==b.quantity){var w=b.name;break}}for(a=0;a<m;a++){b=l[a];if(k){var q=b.quantity;c=" selected"}else c="";c=1!==b.quantity?'<option value="'+
b.id+'"'+c+">"+b.name+" ("+b.quantity+" x "+w+")</option>":'<option value="'+b.id+'"'+c+">"+b.name+"</option>";g.append(c);k=!1}var u=function(){if(1==e.length){var f=d.req_quantity/q;h.val(f);$("#inv_track_item_req_item_id").val(d.req_item_id)}else{p.show();var t,n=$("#inv_track_item_req_item_id");n.html("");for(a=0;a<e.length;a++)d=e[a],n.append(new Option(d.req_ref,d.req_item_id)),k&&(f=d.req_quantity/q,h.val(f)),k=!1;n.on("change",function(){t=parseInt(n.val());for(a=0;a<e.length;a++)if(d=e[a],
d.req_item_id==t){f=d.req_quantity/q;h.val(f);break}})}};u();if(1<m){var v;g.on("change",function(){v=parseInt(g.val());for(a=0;a<m;a++)if(b=l[a],b.id==v){u();break}})}}})});
