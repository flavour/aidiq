import{Map,View,getCenter,Feature,Heatmap,ImageLayer,Point,Projection,Static,VectorSource}from"./ol.dc_editor.min.js";!function(factory){"use strict";!function($,Map,View,getCenter,Feature,Heatmap,ImageLayer,Point,Projection,Static,VectorSource){var heatmapID=0;$.widget("s3.heatMap",{options:{},_create:function(){this.id=heatmapID,heatmapID+=1,this.eventNamespace=".heatMap"},_init:function(options){this.heatMap()},heatMap:function(){var $this=$(this.element),$parent=$this.parent(),data=JSON.parse($this.val()),points=data.p,url=S3.Ap.concat("/default/download/"+data.i);$("<img>").attr("src",url).load((function(){for(var feature,point,extent=[0,0,this.width,this.height],projection=new Projection({code:"base-image",units:"pixels",extent:extent}),raster=new ImageLayer({source:new Static({url:url,projection:projection,imageExtent:extent})}),source=new VectorSource({wrapX:!1}),vector=new Heatmap({source:source,gradient:["#00AAA0","#f00"],blur:7,radius:8}),i=(new Map({controls:[],interactions:[],layers:[raster,vector],target:$parent.attr("id"),view:new View({projection:projection,center:getCenter(extent),zoom:0,maxZoom:0})}),0),len=points.length;i<len;i++)point=new Point(points[i]),(feature=new Feature(point)).set("weight",.9),source.addFeature(feature)}))}})}(window.jQuery,Map,View,getCenter,Feature,Heatmap,ImageLayer,Point,Projection,Static,VectorSource)}();