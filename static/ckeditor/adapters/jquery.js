/*
 Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.
 For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
*/
(function(a){if("undefined"==typeof a)throw Error("jQuery should be loaded before CKEditor jQuery adapter.");if("undefined"==typeof CKEDITOR)throw Error("CKEditor should be loaded before CKEditor jQuery adapter.");CKEDITOR.config.jqueryOverrideVal="undefined"==typeof CKEDITOR.config.jqueryOverrideVal?!0:CKEDITOR.config.jqueryOverrideVal;a.extend(a.fn,{ckeditorGet:function(){var d=this.eq(0).data("ckeditorInstance");if(!d)throw"CKEditor is not initialized yet, use ckeditor() with a callback.";return d},
ckeditor:function(d,f){if(!CKEDITOR.env.isCompatible)throw Error("The environment is incompatible.");if("function"!==typeof d){var p=f;f=d;d=p}var l=[];f=f||{};this.each(function(){var b=a(this),g=b.data("ckeditorInstance"),m=b.data("_ckeditorInstanceLock"),e=this,k=new a.Deferred;l.push(k.promise());if(g&&!m)d&&d.apply(g,[this]),k.resolve();else if(m)g.once("instanceReady",function(){setTimeout(function c(){g.element?(g.element.$==e&&d&&d.apply(g,[e]),k.resolve()):setTimeout(c,100)},0)},null,null,
9999);else{if(f.autoUpdateElement||"undefined"==typeof f.autoUpdateElement&&CKEDITOR.config.autoUpdateElement)f.autoUpdateElementJquery=!0;f.autoUpdateElement=!1;b.data("_ckeditorInstanceLock",!0);g=a(this).is("textarea")?CKEDITOR.replace(e,f):CKEDITOR.inline(e,f);b.data("ckeditorInstance",g);g.on("instanceReady",function(r){var c=r.editor;setTimeout(function t(){if(c.element){r.removeListener();c.on("dataReady",function(){b.trigger("dataReady.ckeditor",[c])});c.on("setData",function(q){b.trigger("setData.ckeditor",
[c,q.data])});c.on("getData",function(q){b.trigger("getData.ckeditor",[c,q.data])},999);c.on("destroy",function(){b.trigger("destroy.ckeditor",[c])});c.on("save",function(){a(e.form).trigger("submit");return!1},null,null,20);if(c.config.autoUpdateElementJquery&&b.is("textarea")&&a(e.form).length){var n=function(){b.ckeditor(function(){c.updateElement()})};a(e.form).on("submit",n);a(e.form).on("form-pre-serialize",n);b.on("destroy.ckeditor",function(){a(e.form).off("submit",n);a(e.form).off("form-pre-serialize",
n)})}c.on("destroy",function(){b.removeData("ckeditorInstance")});b.removeData("_ckeditorInstanceLock");b.trigger("instanceReady.ckeditor",[c]);d&&d.apply(c,[e]);k.resolve()}else setTimeout(t,100)},0)},null,null,9999)}});var h=new a.Deferred;this.promise=h.promise();a.when.apply(this,l).then(function(){h.resolve()});this.editor=this.eq(0).data("ckeditorInstance");return this}});CKEDITOR.config.jqueryOverrideVal&&(a.fn.val=CKEDITOR.tools.override(a.fn.val,function(d){return function(f){if(arguments.length){var p=
this,l=[],h=this.each(function(){var m=a(this),e=m.data("ckeditorInstance");if(m.is("textarea")&&e){var k=new a.Deferred;e.setData(f,function(){k.resolve()});l.push(k.promise());return!0}return d.call(m,f)});if(l.length){var b=new a.Deferred;a.when.apply(this,l).done(function(){b.resolveWith(p)});return b.promise()}return h}h=a(this).eq(0);var g=h.data("ckeditorInstance");return h.is("textarea")&&g?g.getData():d.call(h)}}))})(window.jQuery);
